<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>Vior test</title>
    </head>
    <body>
        <div id="app">
            <div id="app">
                <div>{{ globalText }}</div>
                <custom-component></custom-component>
            </div>
        </div>
        <script type="module">
            import Vior from '../src/index.js'
            
            let CustomPlugin = {
                setup(opts, arg) {
                    let origin = typeof opts.vars == 'function' ? opts.vars() : {}
                    opts.vars = function () {
                        return Object.assign(origin, {
                            globalText: arg
                        })
                    }
                }
            }
            
            let CustomComponent = {
                html: `
                    <div>{{ globalText }}</div>
                `,
                plugins: [
                    {
                        plugin: CustomPlugin,
                        arg: 'hello, Vior'
                    }
                ]
            }
            
            let viorIns = new Vior({
                comps: {
                    'custom-component': CustomComponent
                },
                plugins: [
                    {
                        plugin: CustomPlugin,
                        arg: 'hello, world'
                    }
                ]
            }).mount(document.getElementById('app'))
        </script>
    </body>
</html>