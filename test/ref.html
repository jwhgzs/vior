<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Static Template</title>
  </head>
  <body>
    <div id="app">
      <!-- 通过 $ref 指令实现实例（DOM对象或Vior实例对象）引用。如下，响应性变量 ref_h1 的值将被赋为 <h1></...> 的DOM对象 -->
      <h1 $ref="ref_h1">我就是一个标题~</h1>
      <h2 $ref="ref_h2">我是副标题~</h2>
      <!-- 在自定义组件上使用 $ref 指令，则会取得其Vior组件实例对象。 -->
      <!-- 通过传入初始值为数组类型的响应性变量，启用叠加模式（见JS部分）。如下，refs_custom 的值将为多个Vior组件实例组成的数组。 -->
      <custom-component $for="(k, v) in arr" $ref="refs_custom"
        >{{ v }}</custom-component
      >
      <br />
      <button @click="arr.push(arr.length + 1)">变一变</button>
    </div>
    <script type="module">
      import Vior from "../src/index.js";

      let CustomComponent = {
        html: `
        序号：<slot-receiver></slot-receiver>
        <br/>
    `
      };

      let viorIns = new Vior({
        vars() {
          return {
            ref_h1: null,
            ref_h2: null,
            // 响应性变量 refs_custom 将启用叠加模式
            refs_custom: [],
            arr: [1, 2, 3]
          };
        },
        watchers: {
          ref_h1() {
            console.log("ref_h1", this.vars.ref_h1);
          },
          ref_h2() {
            console.log("ref_h2", this.vars.ref_h2);
          },
          refs_custom() {
            console.log("refs_custom", this.vars.refs_custom);
          }
        },
        comps: {
          "custom-component": CustomComponent
        }
      }).mount(document.getElementById("app"));
    </script>
  </body>
</html>
