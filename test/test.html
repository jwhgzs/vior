<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Vior test</title>
    </head>
    <body>
        <div id="app">
    <!-- Vior仿照Vue的做法，对表单元素做了很多特殊处理。
         在常用表单元素中，你可以通过 $value 指令获取表单组件的值（双向绑定）。
         只需要观看下面的实例，你就大概掌握了这部分内容： -->
    
    <!-- 普通input -->
    <input type="text" $value="inputVal"/>
    <br/>
    <strong>你输入了: </strong>{{ inputVal }}
    
    <hr/>
    
    <!-- 复选框 -->
    <input type="checkbox" :value="{ id: 1 }" $value="inputVal1"/>
    <input type="checkbox" :value="{ id: 2 }" $value="inputVal1"/>
    <br/>
    <strong>你选择了: </strong>{{ JSON.stringify(inputVal1) }}
    
    <hr/>
    
    <!-- 单选框 -->
    <input name="aaa" type="radio" value="A" $value="inputVal2"/>
    <input name="aaa" type="radio" value="B" $value="inputVal2"/>
    <br/>
    <strong>你选择了: </strong>{{ JSON.stringify(inputVal2) }}
    
    <hr/>
    
    <!-- 单选select -->
    <select $value="inputVal3">
        <option disabled value="">Please select one</option>
        <option :value="{ a: 1 }">A</option>
        <option :value="{ b: 1 }">B</option>
        <option :value="{ c: 1 }">C</option>
    </select>
    <br/>
    <strong>你选择了: </strong>{{ JSON.stringify(inputVal3) }}
    
    <hr/>
    
    <!-- 多选select -->
    <select $value="inputVal4" multiple>
        <option disabled value="">Please select multiple items</option>
        <option>A</option>
        <option>B</option>
        <option>C</option>
    </select>
    <br/>
    <strong>你选择了: </strong>{{ JSON.stringify(inputVal4) }}
    
    <hr/>
    
    <!-- 自定义组件 -->
    <custom-component $value="inputVal5"></custom-component>
    <br/>
    <strong>你输入了: </strong>{{ inputVal5 }}
</div>
        <script type="module">
            import Vior from '../src/index.js'

let customComponent = {
    // 在自定义组件上使用 $value 命令，Vior会向组件提供一个名为 $value 的attribute，此值即为父组件向子组件的的数据流传递的值。
    // 而子组件向父组件的数据流传值，则需要通过触发名为 on$value 的组件事件，并提供一个参数，其值为要传的值。
    html: `
        <textarea $value="$value" @input="$triggerEvent('on$value', this.value)"></textarea>
    `,
    attrs: ['$value'],
    events: ['on$value']
}

let viorIns = new Vior({
    vars() {
        return {
            inputVal: 'default value',
            inputVal1: [{ id: 1 }],
            inputVal2: 'A',
            inputVal3: '',
            inputVal4: ['A', 'C'],
            inputVal5: 'test'
        }
    },
    comps: {
        'custom-component': customComponent
    }
}).mount(document.getElementById('app'))
        </script>
    </body>
</html>